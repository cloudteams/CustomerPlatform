<!DOCTYPE html>
<html lang="en">
<head>

	<!-- start: Meta -->
	<meta charset="utf-8">
	<title>Settings</title>
	<meta name="description" content="Activity Tracker Application">
	<meta name="author" content="Aggelos Arvanitakis">
	<meta name="keyword" content="Activity, Track, Tracker, Manage, Logs, Everyday Life">
	<!-- end: Meta -->

	<!-- start: Mobile Specific -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- end: Mobile Specific -->

	<!-- start: CSS -->
    {% load staticfiles %}
    {% load custom_templates %}
    <link href="{% static 'activitytracker/css/googlemaps.css' %}" rel="stylesheet">
    <link href="{% static 'activitytracker/css/jquery-clockpicker.min.css' %}" rel="stylesheet">
	<link href="{% static 'activitytracker/css/bootstrap-clockpicker.min.css' %}" rel="stylesheet">
	<link id="bootstrap-style" href="{% static 'activitytracker/css/bootstrap.min.css' %}" rel="stylesheet">
	<link href="{% static 'activitytracker/css/bootstrap-responsive.min.css' %}" rel="stylesheet">
	<link id="base-style" href="{% static 'activitytracker/css/style.css' %}" rel="stylesheet">
	<link id="base-style-responsive" href="{% static 'activitytracker/css/style-responsive.css' %}" rel="stylesheet">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800&subset=latin,cyrillic-ext,latin-ext' rel='stylesheet' type='text/css'>
	<!-- end: CSS -->


	<!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
	  	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<link id="ie-style" href="css/ie.css" rel="stylesheet">
	<![endif]-->

	<!--[if IE 9]>
		<link id="ie9style" href="css/ie9.css" rel="stylesheet">
	<![endif]-->

	<!-- start: Favicon -->
	<link rel="shortcut icon" href="{% static '/static/activitytracker/img/favicon.ico' %}">
	<!-- end: Favicon -->


</head>

<body>
		<!-- start: Header -->
	<div class="navbar">
		<div class="navbar-inner">
			<div class="container-fluid">
				<a class="btn btn-navbar" data-toggle="collapse" data-target=".top-nav.nav-collapse,.sidebar-nav.nav-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</a>
				<a class="brand" href="{% url 'index' %}"><span>Activity Tracker</span></a>

				<!-- start: Header Menu -->
				<div class="nav-no-collapse header-nav">
					<ul class="nav pull-right">
						<!-- start: User Dropdown -->
						<li class="dropdown">
							<a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
								<i class="halflings-icon white user"></i>&nbsp;<span id="username">{{ username }}</span>
								<span class="caret"></span>
							</a>
							<ul class="dropdown-menu">
								<li class="dropdown-menu-title">
 									<span>Account Options</span>
								</li>
								<li>
                                    <a href="{% url 'settings' %}"><i class="halflings-icon user"></i>Profile</a>
							    </li>
								<li>
                                    <a href="{% url 'logout' %}"><i class="halflings-icon off"></i> Logout</a>
                                </li>
							</ul>
						</li>
						<!-- end: User Dropdown -->
					</ul>
				</div>
				<!-- end: Header Menu -->
			</div>
		</div>
	</div>

	<div class="container-fluid-full">
		<div class="row-fluid">

			<!-- start: Main Menu -->
			<div id="sidebar-left" class="span2">
				<div class="nav-collapse sidebar-nav">
					<ul class="nav nav-tabs nav-stacked main-menu">
						<li><a href="{% url 'index' %}"><i class="icon-list-alt"></i><span class="hidden-tablet"> History</span></a></li>
						<li><a href="{% url 'timeline' %}"><i class="icon-tasks"></i><span class="hidden-tablet"> Timeline</span></a></li>
						<li><a href="{% url 'goals' %}"><i class="icon-trophy"></i><span class="hidden-tablet"> Goals</span></a></li>
						<li>
							<a class="dropmenu" href="#"><i class="icon-bar-chart"></i><span class="hidden-tablet"> Analytics</span></a>
							<ul>
								<li><a class="submenu" href="{% url 'analytics-activities' %}"><i class="icon-star"></i><span class="hidden-tablet"> Activities</span></a></li>
								<li><a class="submenu" href="{% url 'analytics-friends' %}"><i class="icon-group"></i><span class="hidden-tablet"> Friends</span></a></li>
								<li><a class="submenu" href="{% url 'analytics-goals' %}"><i class="icon-trophy"></i><span class="hidden-tablet"> Goals</span></a></li>
                                <li><a class="submenu" href="{% url 'analytics-places' %}"><i class="icon-globe"></i><span class="hidden-tablet"> Places</span></a></li>
                                <li><a class="submenu" href="{% url 'analytics-objects' %}"><i class="icon-wrench"></i><span class="hidden-tablet"> Objects</span></a></li>
							</ul>
						</li>
                    </ul>
				</div>
			</div>
			<noscript>
				<div class="alert alert-block span10">
					<h4 class="alert-heading">Warning!</h4>
					<p>You need to have <a href="http://en.wikipedia.org/wiki/JavaScript" target="_blank">JavaScript</a> enabled to use this site.</p>
				</div>
			</noscript>

			<!-- start: Content -->
			<div id="content" class="span10" style="min-height: 582px !important">
				<ul class="breadcrumb">
					<li>
						<i class="icon-home"></i>
						<a href="{% url 'index' %}">Home</a>
						<i class="icon-angle-right"></i>
					</li>
					<li><a href="#">Settings</a></li>
				</ul>
               <!-- Content begins HERE ------------------------------------------------------------------>

                <div class="row-fluid ">
					<div class="box span12 blueNavy">
						<div class="box-header blueNavy" data-original-title>
							<h2 align="center"><i class="halflings-icon user white"></i><span class="break"></span>User Profile</h2>
							<div class="box-icon">
								<a href="#" class="btn-setting" data-toggle="modal" data-target="#editinfo"><i class="halflings-icon white edit"></i></a>
								<a href="#" class="btn-setting" data-toggle="modal" data-target="#changepassword"><i class="halflings-icon white lock"></i></a>
								<a href="#" class="btn-setting" data-toggle="modal" data-target="#deleteaccount"><i class="halflings-icon white ban-circle"></i></a>
							</div>
						</div>
						<div class="box-content">
							<table id=PlacesTable" class="table table-striped table-bordered bootstrap-datatable datatable">
							<thead class="goal-header">
								<tr>
								  <th>Username</th>
								  <th>First Name</th>
								  <th>Last Name</th>
								  <th>E-Mail Address</th>
								  <th>Date of Birth</th>
								  <th>Gender</th>
								</tr>
							</thead>
							<tbody>
							<tr>
								<td class="center" id="Tblusername">{{ username }}</td>
								<td class="center" id="Tblfirstname">{{ firstname }}</td>
								<td class="center" id="Tbllastname">{{ lastname }}</td>
								<td class="center" id="Tblemail">{{ email }}</td>
								<td class="center" id="Tblbirth">{{ birth }}</td>
								<td class="center" id="Tblgender">{{ gender }}</td>
							</tr>
							</tbody>
							</table>
						</div>
					</div>
                </div>

				<div class="row-fluid">
					<div class="row-fluid">
						<p id="successmsg" align="center" style="font-weight:bold;color:green">&nbsp;</p>
					</div>
				</div>
				<div id="overlay">
					<img src="{% static 'activitytracker/img/spinner-mini.gif' %}" alt="Loading" />
				</div>
            	<div class="row-fluid ">
					<div class="box span12 blueNavy">
						<div class="box-header blueNavy" data-original-title>
							<h2 align="center"><i class="icon-cloud white"></i><span class="break"></span>Provider Management</h2>
						</div>
						<div class="box-content">
							<table id=PlacesTable" class="table table-striped table-bordered bootstrap-datatable datatable"><thead class="goal-header">
								<thead class='goal-header'>
									<tr>
									  <th>Provider</th>
									  <th>Name</th>
									  <th>Status</th>
									  <th>Options</th>
									</tr>
								</thead>
								<tbody>

                                    {% for provider_name,provider_data in providerDomValues.items %}
                                    <tr class="connected-app {{ provider_name }}">
										<td class="center" ><img src="{% static 'activitytracker/img/'|add:provider_name|add:'.png' %}"/></td>
										<td class="center"><span class="connected-app-text">{{ provider_name|capitalizeFirstLetter }}</span></td>
										<td class="center "><span class="connected-app-text" style="color:{{ provider_data.statusFontColor }}"><i class='{{ provider_data.statusIcon }}'></i>&nbsp;{{ provider_data.statusText }}</span></td>
										<td class="center">
                                            {% if provider_data.statusText == "App connected" %}
                                            <a class="btn connected-app-button synchronize-button" onclick="synchronizeProvider('{{ provider_name }}')">Synchronize</a>
                                            {% endif %}
                                            <a onclick="appFunctionHandler('{{ provider_name }}')" class="btn connected-app-button {{ provider_data.buttonClassColor }}">{{ provider_data.buttonText }}</a>
                                        </td>
									</tr>
                                    {% endfor %}
									<tr class='disconnected-app'>
										<td class="center" ><img  src="{% static 'activitytracker/img/facebook.png' %}"/></td>
										<td class="center"><span class="connected-app-text">Facebook</span></td>
										<td class="center " style='color:red'><span class="connected-app-text"><i class='icon-remove-circle'></i>&nbsp;Unavailable</span></td>
										<td class="center"><a class="btn dead connected-app-button">Unavailable</a></td>
									</tr>
                                	<tr class='disconnected-app' style="background-color:black">
										<td class="center" ><img src="{% static 'activitytracker/img/google_plus.png' %}"/></td>
										<td class="center"><span class="connected-app-text">Google +</span></td>
										<td class="center " style='color:red'><span class="connected-app-text"><i class='icon-remove-circle'></i>&nbsp;Unavailable</span></td>
										<td class="center"><a class="btn dead connected-app-button">Unavailable</a></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
                </div>
                <div class='row-fluid'>
                    <div class="box span12 blueNavy">
						<div class="box-header blueNavy" data-original-title>
							<h2 align="center"><i class="halflings-icon map-marker white"></i><span class="break"></span>Your Places</h2>
							<div class="box-icon">
								<a href="#" class="btn-setting" data-toggle="modal" data-target="#addPlaceModal" style="color:white"><i class="halflings-icon white plus"></i>add another</a>
							</div>
						</div>
						<div class="box-content">
							<table id="PlacesTable" class="table table-striped table-bordered bootstrap-datatable">
								<thead class="goal-header">
									<tr>
										<th>Place Name</th>
										<th>Place Address</th>
                                        <th>Hidden Lat</th>
                                        <th>Hidden Lng</th>
										<th>Options</th>
									</tr>
								</thead>
								<tbody>
									<!-- data from jQuery -->
								</tbody>
							</table>
						</div>
					</div>
                </div>
			</div>
        </div>

			<!-- Modal to delete the account -->
			<div class="modal hide fade" id="deleteaccount">
				<form action="{% url 'settings' %}" method="post" id="deleteaccountForm" name="deleteaccountForm" >
					{% csrf_token %}
					<div class="modal-header ">
						<button type="button" class="close" data-dismiss="modal">×</button>
						<h4>Delete Account</h4>
					</div>
					<div class="modal-body" align="center">
						<p>To delete your account type your password and click the "Delete" button:</p>
						<div class="input-prepend row-fluid" title="Password">
							<span class="add-on"><i class="halflings-icon lock"></i></span>
							<input class="input-large" name="password" type="password" placeholder="current password"/>
						</div>
						<div class="row-fluid">
								<p id="deleteaccountmsg" align="center" style="color:red"></p>
						</div>
					</div>
					<div class="modal-footer">
						<a href="#" class="btn btn-info" data-dismiss="modal">Cancel</a>
						<input type="submit" class="btn btn-danger" name="submitDelete" value="Delete">
					</div>
				</form>
			</div>

    		<!-- Modal to add another place to your account -->
    		<div class="modal hide fade" id="addPlaceModal">
				<form action="{% url 'places' %}" method="post" id="addPlaceForm" name="addPlaceForm" style="margin-bottom:0;">
					{% csrf_token %}
					<div class="modal-header ">
						<button type="button" class="close" data-dismiss="modal">×</button>
						<h4>Add a new Place</h4>
					</div>
					<div class="modal-body" align="center">
						<p>First, give this place a nickname:</p>
						<div class="input-prepend row-fluid" title="Placename">
							<span class="add-on"><i class="halflings-icon map-marker"></i></span>
							<input class="input-large" name="placename" type="text" placeholder="Home, Work, etc"/>
						</div>
                        <p>Then find it by giving the address in the map below:</p>
                        <div>
                           <input id="places-input" class="map-controls places-input" type="text" placeholder="Search for Places">
							<div id="map-canvas" class="map-canvas"></div>
                   		</div>
					</div>
					<div class="modal-footer">
						<a href="#" class="btn btn-danger" data-dismiss="modal">Cancel</a>
						<input type="button" class="btn btn-info" name="submitAddPlace" id="submitAddPlace" value="Add Place">
					</div>
				</form>
			</div>

			<!-- modal to edit a place -->
    		<div class="modal hide fade" id="editPlaceModal">
				<form action="{% url 'places' %}" method="post" id="editPlaceForm" name="editPlaceForm" style="margin-bottom:0;">
					{% csrf_token %}
					<div class="modal-header ">
						<button type="button" class="close" data-dismiss="modal">×</button>
						<h4>Update Details of Place</h4>
					</div>
					<div class="modal-body" align="center">
						<p>Optionally, modify the nickname:</p>
						<div class="input-prepend row-fluid" title="Placename">
							<span class="add-on"><i class="halflings-icon map-marker"></i></span>
							<input class="input-large" name="placename" type="text" placeholder="Home, Work, etc"/>
						</div>
                        <p>Or change the location of the Place:</p>
                        <div>
                           <input id="places-input-2" class="map-controls places-input" type="text" placeholder="Search for Places">
							<div id="map-canvas-2" class="map-canvas"></div>
                   		</div>
					</div>
					<div class="modal-footer">
						<a href="#" class="btn btn-danger" data-dismiss="modal">Cancel</a>
						<input type="button" class="btn btn-info" name="submitEditPlace" id="editPlaceModalConfirm" value="Update Place">
					</div>
				</form>
			</div>

    		<!-- Modal to Delete a Place -->
			<div class="modal hide fade" id="deletePlaceModal">
					<div class="modal-header ">
						<button type="button" class="close" data-dismiss="modal">×</button>
						<h4>Delete Place</h4>
					</div>
					<div class="modal-body" align="center">
						<p>Are you sure you want to delete this place?</p>
					</div>
					<div class="modal-footer">
						<a href="#" class="btn btn-info" data-dismiss="modal">Cancel</a>
						<input type="submit" class="btn btn-danger" name="submitDelete" id="deletePlaceModalConfirm" value="Delete">
					</div>
			</div>





			<!-- Modal for User's info editing -->
			<div class="modal hide fade" id="editinfo">
				<form action="{% url 'settings' %}" method="post" name="editinfoForm" id="editinfoForm">
					{% csrf_token %}
					<div class="modal-header ">
						<button type="button" class="close" data-dismiss="modal">×</button>
						<h4>Edit Account Information</h4>
					</div>
					<div class="modal-body" align="center">
						<p> Here you can modify all kind of personal information</p>
						<br/>
                    	<div class="input-prepend row-fluid" title="Username">
							<span class="add-on"><i class="icon-user"></i></span>
							<input class="input-large " name="username" type="text" value="{{ username }}" />
						</div>
						<div class="input-prepend row-fluid" title="FirstName">
							<span class="add-on"><i class="icon-user"></i></span>
							<input class="input-large " name="firstname" type="text" value="{{ firstname }}" />
						</div>
						<div class="input-prepend row-fluid" title="LastName">
							<span class="add-on"><i class="icon-user"></i></span>
							<input class="input-large " name="lastname" type="text" value="{{ lastname }}" />
						</div>
						<div class="input-prepend row-fluid" title="E-mail">
							<span class="add-on"><i class="icon-envelope-alt"></i></span>
							<input class="input-large "  disabled name="email" type="text" value="{{ email }}"/>
						</div>
						<div class="input-prepend row-fluid" title="UserBirthday">
							<span class="add-on"><i class="icon-calendar"></i></span>
							<input placeholder="{{ birth }}" type="text" name="birthday" value ="{{ birth }}"class="datepicker input-large" >
						</div>
						<div class=" row-fluid" title="Gender">
						{% if gender == 'M' %}
							<select name="gender" class="input-small">
							<option value="M" selected >Male</option>
							<option value="F">Female</option>
							</select>
						{% else %}
							<select name="gender" class="input-small">
							<option value="M">Male</option>
							<option value="F" selected >Female</option>
							</select>
						{% endif %}
						</div>
						<div class="row-fluid">
								<p id="editinfomsg" align="center" style="color:red"></p>
						</div>
					</div>
					<div class="modal-footer">
						<a href="#" class="btn btn-danger" data-dismiss="modal">Cancel</a>
						<input type="submit" class="btn btn-info" name="submitEdit" value="Update">
					</div>
				</form>
			</div>

			<!-- Modal to change the password -->
			<div class="modal hide fade" id="changepassword">
				<form action="{% url 'settings' %}" method="post" id="passchangeForm" name="passchangeForm">
					{% csrf_token %}
					<div class="modal-header ">
						<button type="button" class="close" data-dismiss="modal">×</button>
						<h4>Password Change</h4>
					</div>
					<div class="modal-body" align="center">
                        {% if social_login %}
                        <p>Set a password, so you can enter without using social media:</p>
                        <p>(Performing this will log you out of all devices for safety)</p>
						{% else %}
                        <p>Change your password easily by filling the fields bellow:</p>
                        <p>(Performing this will log you out of all devices)</p>
                        {% endif %}

						<div class="input-prepend row-fluid {% if social_login %}hidden{% endif %}" title="Password">
							<span class="add-on"><i class="halflings-icon lock"></i></span>
							<input class="input-large " name="old_password" type="password" placeholder="current password"/>
						</div>
						<div class="input-prepend row-fluid" title="Password">
							<span class="add-on"><i class="halflings-icon lock"></i></span>
							<input class="input-large " name="new_password" type="password" placeholder="new password"/>
						</div>
						<div class="input-prepend row-fluid" title="Password">
							<span class="add-on"><i class="halflings-icon lock"></i></span>
							<input class="input-large " name="new_password_repeat" type="password" placeholder="repeat new password"/>
						</div>
						<div class="row-fluid">
								<p id="passchangemsg" align="center" style="color:red"></p>
						</div>
					</div>
					<div class="modal-footer">
						<a href="#" class="btn btn-danger" data-dismiss="modal">Cancel</a>
						<input type="submit" class="btn btn-info" name="submitChangepass" value="Change">
					</div>
				</form>
			</div>
        	<!-- END of modals -> start of Google Maps attempt -->
	</div>
	<!-- END of Modal for user's settings -->

	<div class="clearfix"></div>

	<footer>
		<p>
			<span style="text-align:left;float:left">&copy; 2015 <a href="http://themifycloud.com/downloads/janux-free-responsive-admin-dashboard-template/">Arvanitakis Labs</a></span>
		</p>
	</footer>

	<!-- start: JavaScript-->

	<script src="{% static 'activitytracker/js/jquery-1.9.1.min.js' %}"></script>

	<script src="{% static 'activitytracker/js/jquery-clockpicker.min.js' %}"></script>

	<script src="{% static 'activitytracker/js/clockpicker.js' %}"></script>

	<script src="{% static 'activitytracker/js/bootstrap.min.js' %}"></script>

	<script src="{% static 'activitytracker/js/bootstrap-clockpicker.min.js' %}"></script>

	<script src="{% static 'activitytracker/js/jquery-migrate-1.0.0.min.js' %}"></script>

	<script src="{% static 'activitytracker/js/jquery-ui-1.10.0.custom.min.js' %}"></script>

	<script src="{% static 'activitytracker/js/jquery.ui.touch-punch.js' %}"></script>

	<script src="{% static 'activitytracker/js/modernizr.js' %}"></script>

	<script src="{% static 'activitytracker/js/jquery.cookie.js' %}"></script>

	<script src="{% static 'activitytracker/js/excanvas.js' %}"></script>

	<script src="{% static 'activitytracker/js/jquery.chosen.min.js' %}"></script>

	<script src="{% static 'activitytracker/js/jquery.uniform.min.js' %}"></script>

	<script src="{% static 'activitytracker/js/jquery.iphone.toggle.js' %}"></script>

	<script src="{% static 'activitytracker/js/counter.js' %}"></script>

    <script src="{% static 'activitytracker/js/jquery.dataTables.js' %}"></script>

	<script src="{% static 'activitytracker/js/custom.js' %}"></script>

	<script type="text/javascript"
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDf_gsxRLZWfI5AueDRydB2s0v5uAgTp3M&?v=3.exp&signed_in=true&libraries=places">
	</script>

    <script src="{% static 'activitytracker/js/settings.js' %}"></script>

	<!-- end: JavaScript-->

</body>
</html>
